# DJIMotorController

> 大疆电机伺服控制器

**名称：**大疆电机伺服控制器

**作用：**处理RM3508/2006电机数据，完成速度环、位置环运算。

**能力：**单块转接板有八路电机接口，理论上可以连接八个电机，实际上由于芯片算力的限制，推荐一块转接板连接四个电机，速度环1KHZ，位置环1KHZ 电调接CAN1 主控接CAN2

## 下载说明

### 下载项目

1. 下载安装git：下载地址 [https://git-scm.com/downloads](https://git-scm.com/downloads)
2. 在桌面上（或者你想下载到的文件中）右键 选择 **“Git Bash Here”** 
3. 输入命令 `git clone https://e.coding.net/yltzdhbc/hcrt/HCRT-DJIMotorController.git`

### 项目文件

Hardware：存放立创Eda硬件电路

Software：keil控制器程序

Image：一些图片

README.md：项目说明，解释文档

### 硬件电路

目前为EDA导出的 立创EDA源码，需要使用立创EDA打开

### KEIL软件

直接编译下载即可



## 使用测试

1. 上电，电源指示灯全亮，证明电源没有问题

2. 将电机的CAN接入CAN1口，设置好终端电阻，此时程序会运行起来，A0、A1、A2、A3四个灯全亮。（如果没有亮灯的话检查线路问题、终端电阻问题）

3. 程序运行起来之后，电机会锁死位置（就算是速度模式也是如此），通过CAN2连接主控，发送指令之后会维持匀速度转动

4. 灯语 ：（还未完善）

   | LED闪烁状态 | 代表的意思               |
   | ----------- | ------------------------ |
   | 不闪烁      | 位置环、速度环程序未运行 |
   | 四等全亮    | 速度环正常运行           |
   | 待完善      |                          |

   



## 更新日志

### updata：2020.8.22 

- **Edit：**ylt

- **主要修改内容：**文档整理，git版本加入

1. 更改了CAN2的速度，之前是500Kbps，现在是1Mbps
2. 调整了启动逻辑，上电无需发送任何动作，电机应该自锁
3. 整理使用文档

### updata：2020.1.28 

- **Edit：**ylt

- **主要修改内容：**ACTION开项目中的接口引脚更正

1. 控制RM3508电机，2006电机
2. 初始默认为速度环
3. CAN1连接C620电调CAN接口 1mbps
4. CAN2跟主控通信 500kbps , 更改为1mbps

